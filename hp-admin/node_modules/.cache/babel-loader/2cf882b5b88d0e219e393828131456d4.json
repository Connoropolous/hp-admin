{"ast":null,"code":"import bcrypt from 'bcryptjs';\nimport { isString } from 'lodash/fp';\nexport const transactionList = {\n  ledger: {\n    balance: '1000.01',\n    credit: '0',\n    payable: '242.0201',\n    receivable: '0',\n    fees: '0'\n  },\n  older: {\n    state: null,\n    since: null,\n    until: '2019-08-30T00:18:00+00:00',\n    limit: null\n  },\n  newer: {\n    state: null,\n    since: '2019-08-30T11:45:10+00:00',\n    until: null,\n    limit: null\n  },\n  cover: {\n    first: 0,\n    count: 5,\n    total: 5\n  },\n  transactions: [{\n    index: 4,\n    state: 'outgoing/approved',\n    origin: 'QmYNt6DYMiymJtf8oeZ4qn86yWANurFEuAzKuzMQGhsnDd',\n    event: {\n      Promise: {\n        tx: {\n          from: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n          to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n          amount: '40.01',\n          fee: '0',\n          deadline: '2020-01-22T00:00:00-02:00',\n          notes: 'lyft ride',\n          synchronous: null\n        },\n        request: null\n      }\n    },\n    timestamp: {\n      origin: '2019-08-30T11:45:10+00:00',\n      event: '2019-08-30T11:45:10+00:00'\n    },\n    adjustment: {\n      balance: {\n        Ok: '0'\n      },\n      payable: {\n        Ok: '40.01'\n      },\n      receivable: {\n        Ok: '0'\n      },\n      fees: {\n        Ok: '0'\n      },\n      resulting_balance: {\n        // 'This endpoint is a WIP'\n        Ok: '0'\n      }\n    }\n  }, {\n    index: 2,\n    state: 'incoming/completed',\n    origin: 'Qmbm4B1u3rN8ua39QwDkjmxssmcKzj4nMngbqnxU7fDfQE',\n    event: {\n      Receipt: {\n        cheque: {\n          invoice: {\n            promise: {\n              tx: {\n                from: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n                to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n                amount: '10.01',\n                fee: '0',\n                deadline: '2020-02-02T00:00:00+00:00',\n                notes: 'Taco Tuesday!',\n                synchronous: null\n              },\n              request: 'Qmbm4B1u3rN8ua39QwDkjmxssmcKzj4nMngbqnxU7fDfQE'\n            },\n            promise_sig: 'gcAT6bIvN5wd11OS3gxd1mmimtf/5c9niLhL7eWruG1Kd3kg+CfclsbI/dG69NSXBQbvhwj1u4DLhdSMHutRAQ==',\n            promise_commit: 'QmXTCCEMeobd97tiMTyqZsGGVFHL6MWyStxnePSc6MCGes'\n          },\n          invoice_sig: 'S6PuR1MnOB9GuOniJ018oWC6DLTB0oiyu4NjR2a0CkiKtmdMIyeePIwgBbpx6uiDlN2CQTznwzdo7Ee9/yygAQ==',\n          invoice_commit: 'QmRCS3aPbfJb7GTyrGFsP8JMvFmvaD43BcXGpA9mhmtpYC',\n          invoice_proof: 'QmVEQhMp7w4BEzXfCnTWGfritiWAgfWamMxmLQ2n3SdACt'\n        },\n        cheque_sig: 'HxhqdPgh+h1XwiNxsGf336l1PpZF+dUQ+J2wNQlKADGt0yZg7yNbKU5sujRTFR3saP5eBpnAA3hjuC7HkhVaBg==',\n        cheque_commit: 'QmSXG9G8hNnfZbXBUQ6cMSNn6Y33ywLG5m6czvTLNs2VQn',\n        cheque_proof: 'QmVEQhMp7w4BEzXfCnTWGfritiWAgfWamMxmLQ2n3SdACt'\n      }\n    },\n    timestamp: {\n      origin: '2019-08-30T11:16:12+00:00',\n      event: '2019-08-30T11:19:33+00:00'\n    },\n    adjustment: {\n      balance: {\n        Ok: '10.01'\n      },\n      payable: {\n        Ok: '0'\n      },\n      receivable: {\n        Ok: '0'\n      },\n      fees: {\n        Ok: '0'\n      },\n      resulting_balance: {\n        // 'This endpoint is a WIP'\n        Ok: '0'\n      }\n    }\n  }, {\n    index: 3,\n    state: 'outgoing/completed',\n    origin: 'QmXTCCEMeobd97tiMTyqZsGGVFHL6MWyStxnePSc6MCGes',\n    event: {\n      Cheque: {\n        invoice: {\n          promise: {\n            tx: {\n              from: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n              to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n              amount: '10.01',\n              fee: '0',\n              deadline: '2020-02-02T00:00:00+00:00',\n              notes: 'Taco Tuesday!',\n              synchronous: null\n            },\n            request: 'Qmbm4B1u3rN8ua39QwDkjmxssmcKzj4nMngbqnxU7fDfQE'\n          },\n          promise_sig: 'gcAT6bIvN5wd11OS3gxd1mmimtf/5c9niLhL7eWruG1Kd3kg+CfclsbI/dG69NSXBQbvhwj1u4DLhdSMHutRAQ==',\n          promise_commit: 'QmXTCCEMeobd97tiMTyqZsGGVFHL6MWyStxnePSc6MCGes'\n        },\n        invoice_sig: 'S6PuR1MnOB9GuOniJ018oWC6DLTB0oiyu4NjR2a0CkiKtmdMIyeePIwgBbpx6uiDlN2CQTznwzdo7Ee9/yygAQ==',\n        invoice_commit: 'QmRCS3aPbfJb7GTyrGFsP8JMvFmvaD43BcXGpA9mhmtpYC',\n        invoice_proof: 'QmVEQhMp7w4BEzXfCnTWGfritiWAgfWamMxmLQ2n3SdACt'\n      }\n    },\n    timestamp: {\n      origin: '2019-08-30T11:17:16+00:00',\n      event: '2019-08-30T11:19:32+00:00'\n    },\n    adjustment: {\n      balance: {\n        Ok: '-10.01'\n      },\n      payable: {\n        Ok: '0'\n      },\n      receivable: {\n        Ok: '0'\n      },\n      fees: {\n        Ok: '0'\n      },\n      resulting_balance: {\n        // 'This endpoint is a WIP'\n        Ok: '0'\n      }\n    }\n  }, {\n    index: 1,\n    state: 'outgoing/approved',\n    origin: 'QmVGe2MVJeVLpXZfWMXPLZuH6fPBQbtcbPuh9fzBFEDQxj',\n    event: {\n      Promise: {\n        tx: {\n          from: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n          to: 'HcScic3VAmEP9ucmrw4MMFKVARIvvdn43k6xi3d75PwnOswdaIE3BKFEUr3eozi',\n          amount: '200.01',\n          fee: '2.0001',\n          deadline: '2020-12-01T00:00:00+00:00',\n          notes: null,\n          synchronous: null\n        },\n        request: null\n      }\n    },\n    timestamp: {\n      origin: '2019-08-30T10:57:29+00:00',\n      event: '2019-08-30T10:57:29+00:00'\n    },\n    adjustment: {\n      balance: {\n        Ok: '0'\n      },\n      payable: {\n        Ok: '202.0101'\n      },\n      receivable: {\n        Ok: '0'\n      },\n      fees: {\n        Ok: '0'\n      },\n      resulting_balance: {\n        // 'This endpoint is a WIP'\n        Ok: '0'\n      }\n    }\n  }, {\n    index: 0,\n    state: 'incoming/requested',\n    origin: 'QmZR4u634UN9TtwaHvcS1vUkh6VdhmxUfkzTHjmKxZMryz',\n    event: {\n      Request: {\n        from: 'HcScic3VAmEP9ucmrw4MMFKVARIvvdn43k6xi3d75PwnOswdaIE3BKFEUr3eozi',\n        to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n        amount: '200.00',\n        fee: '2',\n        deadline: '2020-12-02T00:00:00+00:00',\n        notes: null,\n        synchronous: null\n      }\n    },\n    timestamp: {\n      origin: '2019-08-30T00:18:00+00:00',\n      event: '2019-08-30T00:18:00+00:00'\n    },\n    adjustment: {\n      balance: {\n        Ok: '0'\n      },\n      payable: {\n        Ok: '0'\n      },\n      receivable: {\n        Ok: '0'\n      },\n      fees: {\n        Ok: '0'\n      },\n      resulting_balance: {\n        // 'This endpoint is a WIP'\n        Ok: '0'\n      }\n    }\n  }]\n};\nexport const pendingList = {\n  requests: [{\n    event: ['QmZR4u634UN9TtwaHvcS1vUkh6VdhmxUfkzTHjmKxZMryz', '2019-09-10T00:18:20+00:00', {\n      Request: {\n        from: 'HcScic3VAmEP9ucmrw4MMFKVARIvvdn43k6xi3d75PwnOswdaIE3BKFEUr3eozi',\n        to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n        amount: '124500.00',\n        fee: '2',\n        deadline: '2020-12-02T00:00:00+00:00',\n        notes: 'I want my $2!',\n        synchronous: null\n      }\n    }],\n    provenance: ['HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r', 'JSnAoopQg0fVHsA3dQIvJ3tRl5CRdtBbCAjzUZLMaWsD51G8nieRhoKK8JIKqkjscsprJe+j+ceun9oPpoc3AA==']\n  }],\n  promises: [{\n    event: ['QmYNt6DYMiymJtf8oeZ4qn86yWANurFEuAzKuzMQGhsnDd', '2019-09-01T11:45:10+00:00', {\n      Promise: {\n        tx: {\n          from: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n          to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n          amount: '2000',\n          fee: '0',\n          deadline: '2020-01-22T00:00:00-02:00',\n          notes: 'lyft ride',\n          synchronous: null\n        },\n        request: null\n      }\n    }],\n    provenance: ['HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r', '3+BrqUuu3sC4bZmub4qGvkmfeKnkJfkm5qZGOM88uompxM0/gE2KNpvTyxpGg44MCbNMB8i8vHBmhTIDMjFwAQ==']\n  }]\n};\nconst agents = [{\n  nick: 'Perry',\n  pub_sign_key: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r'\n}, {\n  nick: 'Sam',\n  pub_sign_key: 'HcScic3VAmEP9ucmrw4MMFKVARIvvdn43k6xi3d75PwnOswdaIE3BKFEUr3eozi'\n}];\n\nconst whoamiObj = agentId => agents.find(agent => agent.pub_sign_key === agentId) || {\n  error: 'No agent was found by this id.'\n};\n\nfunction listPending({\n  origins\n}) {\n  if (!origins) return pendingList;\n\n  if (isString(origins)) {\n    const filter = entry => entry.event[0] === origins;\n\n    return {\n      requests: pendingList.requests.filter(filter),\n      promises: pendingList.promises.filter(filter)\n    };\n  }\n\n  throw new Error('Array value for origins param of list_pending is not supported in the mock dna');\n}\n\nconst NUM_SALT_ROUNDS = 10;\nconst holofuel = {\n  transactions: {\n    whoami: ({\n      agentId\n    }) => agentId ? whoamiObj(agentId) : agents[0],\n    ledger_state: () => transactionList.ledger,\n    list_transactions: () => transactionList,\n    list_pending: listPending,\n    request: ({\n      from,\n      amount,\n      deadline\n    }) => bcrypt.hashSync(from + amount + deadline, NUM_SALT_ROUNDS),\n    promise: ({\n      to,\n      amount,\n      request,\n      deadline\n    }) => bcrypt.hashSync(to + amount + request + deadline, NUM_SALT_ROUNDS),\n    receive_payment: ({\n      promise,\n      promise_sig: sig,\n      promise_commit: commit\n    }) => bcrypt.hashSync(promise + sig + commit + 'accepted', NUM_SALT_ROUNDS),\n    receive_payments_pending: ({\n      promises\n    }) => bcrypt.hashSync(promises + 'accepted', NUM_SALT_ROUNDS),\n    decline: ({\n      origin\n    }) => bcrypt.hashSync(origin + 'declined', NUM_SALT_ROUNDS),\n    cancel: ({\n      origin\n    }) => bcrypt.hashSync(origin + 'cancelled', NUM_SALT_ROUNDS)\n  }\n};\nexport default holofuel;","map":{"version":3,"sources":["/home/lisa/Documents/gitrepos/holochain/holo/happyTeam/hp-admin/hp-admin/src/mock-dnas/holofuel.js"],"names":["bcrypt","isString","transactionList","ledger","balance","credit","payable","receivable","fees","older","state","since","until","limit","newer","cover","first","count","total","transactions","index","origin","event","Promise","tx","from","to","amount","fee","deadline","notes","synchronous","request","timestamp","adjustment","Ok","resulting_balance","Receipt","cheque","invoice","promise","promise_sig","promise_commit","invoice_sig","invoice_commit","invoice_proof","cheque_sig","cheque_commit","cheque_proof","Cheque","Request","pendingList","requests","provenance","promises","agents","nick","pub_sign_key","whoamiObj","agentId","find","agent","error","listPending","origins","filter","entry","Error","NUM_SALT_ROUNDS","holofuel","whoami","ledger_state","list_transactions","list_pending","hashSync","receive_payment","sig","commit","receive_payments_pending","decline","cancel"],"mappings":"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","sourcesContent":["import bcrypt from 'bcryptjs'\nimport { isString } from 'lodash/fp'\n\nexport const transactionList = {\n  ledger: {\n    balance: '1000.01',\n    credit: '0',\n    payable: '242.0201',\n    receivable: '0',\n    fees: '0'\n  },\n  older: {\n    state: null,\n    since: null,\n    until: '2019-08-30T00:18:00+00:00',\n    limit: null\n  },\n  newer: {\n    state: null,\n    since: '2019-08-30T11:45:10+00:00',\n    until: null,\n    limit: null\n  },\n  cover: {\n    first: 0,\n    count: 5,\n    total: 5\n  },\n  transactions: [\n    {\n      index: 4,\n      state: 'outgoing/approved',\n      origin: 'QmYNt6DYMiymJtf8oeZ4qn86yWANurFEuAzKuzMQGhsnDd',\n      event: {\n        Promise: {\n          tx: {\n            from: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n            to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n            amount: '40.01',\n            fee: '0',\n            deadline: '2020-01-22T00:00:00-02:00',\n            notes: 'lyft ride',\n            synchronous: null\n          },\n          request: null\n        }\n      },\n      timestamp: {\n        origin: '2019-08-30T11:45:10+00:00',\n        event: '2019-08-30T11:45:10+00:00'\n      },\n      adjustment: {\n        balance: {\n          Ok: '0'\n        },\n        payable: {\n          Ok: '40.01'\n        },\n        receivable: {\n          Ok: '0'\n        },\n        fees: {\n          Ok: '0'\n        },\n        resulting_balance: {\n          // 'This endpoint is a WIP'\n          Ok: '0'\n        }\n      }\n    },\n    {\n      index: 2,\n      state: 'incoming/completed',\n      origin: 'Qmbm4B1u3rN8ua39QwDkjmxssmcKzj4nMngbqnxU7fDfQE',\n      event: {\n        Receipt: {\n          cheque: {\n            invoice: {\n              promise: {\n                tx: {\n                  from: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n                  to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n                  amount: '10.01',\n                  fee: '0',\n                  deadline: '2020-02-02T00:00:00+00:00',\n                  notes: 'Taco Tuesday!',\n                  synchronous: null\n                },\n                request: 'Qmbm4B1u3rN8ua39QwDkjmxssmcKzj4nMngbqnxU7fDfQE'\n              },\n              promise_sig: 'gcAT6bIvN5wd11OS3gxd1mmimtf/5c9niLhL7eWruG1Kd3kg+CfclsbI/dG69NSXBQbvhwj1u4DLhdSMHutRAQ==',\n              promise_commit: 'QmXTCCEMeobd97tiMTyqZsGGVFHL6MWyStxnePSc6MCGes'\n            },\n            invoice_sig: 'S6PuR1MnOB9GuOniJ018oWC6DLTB0oiyu4NjR2a0CkiKtmdMIyeePIwgBbpx6uiDlN2CQTznwzdo7Ee9/yygAQ==',\n            invoice_commit: 'QmRCS3aPbfJb7GTyrGFsP8JMvFmvaD43BcXGpA9mhmtpYC',\n            invoice_proof: 'QmVEQhMp7w4BEzXfCnTWGfritiWAgfWamMxmLQ2n3SdACt'\n          },\n          cheque_sig: 'HxhqdPgh+h1XwiNxsGf336l1PpZF+dUQ+J2wNQlKADGt0yZg7yNbKU5sujRTFR3saP5eBpnAA3hjuC7HkhVaBg==',\n          cheque_commit: 'QmSXG9G8hNnfZbXBUQ6cMSNn6Y33ywLG5m6czvTLNs2VQn',\n          cheque_proof: 'QmVEQhMp7w4BEzXfCnTWGfritiWAgfWamMxmLQ2n3SdACt'\n        }\n      },\n      timestamp: {\n        origin: '2019-08-30T11:16:12+00:00',\n        event: '2019-08-30T11:19:33+00:00'\n      },\n      adjustment: {\n        balance: {\n          Ok: '10.01'\n        },\n        payable: {\n          Ok: '0'\n        },\n        receivable: {\n          Ok: '0'\n        },\n        fees: {\n          Ok: '0'\n        },\n        resulting_balance: {\n          // 'This endpoint is a WIP'\n          Ok: '0'\n        }\n      }\n    },\n    {\n      index: 3,\n      state: 'outgoing/completed',\n      origin: 'QmXTCCEMeobd97tiMTyqZsGGVFHL6MWyStxnePSc6MCGes',\n      event: {\n        Cheque: {\n          invoice: {\n            promise: {\n              tx: {\n                from: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n                to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n                amount: '10.01',\n                fee: '0',\n                deadline: '2020-02-02T00:00:00+00:00',\n                notes: 'Taco Tuesday!',\n                synchronous: null\n              },\n              request: 'Qmbm4B1u3rN8ua39QwDkjmxssmcKzj4nMngbqnxU7fDfQE'\n            },\n            promise_sig: 'gcAT6bIvN5wd11OS3gxd1mmimtf/5c9niLhL7eWruG1Kd3kg+CfclsbI/dG69NSXBQbvhwj1u4DLhdSMHutRAQ==',\n            promise_commit: 'QmXTCCEMeobd97tiMTyqZsGGVFHL6MWyStxnePSc6MCGes'\n          },\n          invoice_sig: 'S6PuR1MnOB9GuOniJ018oWC6DLTB0oiyu4NjR2a0CkiKtmdMIyeePIwgBbpx6uiDlN2CQTznwzdo7Ee9/yygAQ==',\n          invoice_commit: 'QmRCS3aPbfJb7GTyrGFsP8JMvFmvaD43BcXGpA9mhmtpYC',\n          invoice_proof: 'QmVEQhMp7w4BEzXfCnTWGfritiWAgfWamMxmLQ2n3SdACt'\n        }\n      },\n      timestamp: {\n        origin: '2019-08-30T11:17:16+00:00',\n        event: '2019-08-30T11:19:32+00:00'\n      },\n      adjustment: {\n        balance: {\n          Ok: '-10.01'\n        },\n        payable: {\n          Ok: '0'\n        },\n        receivable: {\n          Ok: '0'\n        },\n        fees: {\n          Ok: '0'\n        },\n        resulting_balance: {\n          // 'This endpoint is a WIP'\n          Ok: '0'\n        }\n      }\n    },\n    {\n      index: 1,\n      state: 'outgoing/approved',\n      origin: 'QmVGe2MVJeVLpXZfWMXPLZuH6fPBQbtcbPuh9fzBFEDQxj',\n      event: {\n        Promise: {\n          tx: {\n            from: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n            to: 'HcScic3VAmEP9ucmrw4MMFKVARIvvdn43k6xi3d75PwnOswdaIE3BKFEUr3eozi',\n            amount: '200.01',\n            fee: '2.0001',\n            deadline: '2020-12-01T00:00:00+00:00',\n            notes: null,\n            synchronous: null\n          },\n          request: null\n        }\n      },\n      timestamp: {\n        origin: '2019-08-30T10:57:29+00:00',\n        event: '2019-08-30T10:57:29+00:00'\n      },\n      adjustment: {\n        balance: {\n          Ok: '0'\n        },\n        payable: {\n          Ok: '202.0101'\n        },\n        receivable: {\n          Ok: '0'\n        },\n        fees: {\n          Ok: '0'\n        },\n        resulting_balance: {\n          // 'This endpoint is a WIP'\n          Ok: '0'\n        }\n      }\n    },\n    {\n      index: 0,\n      state: 'incoming/requested',\n      origin: 'QmZR4u634UN9TtwaHvcS1vUkh6VdhmxUfkzTHjmKxZMryz',\n      event: {\n        Request: {\n          from: 'HcScic3VAmEP9ucmrw4MMFKVARIvvdn43k6xi3d75PwnOswdaIE3BKFEUr3eozi',\n          to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n          amount: '200.00',\n          fee: '2',\n          deadline: '2020-12-02T00:00:00+00:00',\n          notes: null,\n          synchronous: null\n        }\n      },\n      timestamp: {\n        origin: '2019-08-30T00:18:00+00:00',\n        event: '2019-08-30T00:18:00+00:00'\n      },\n      adjustment: {\n        balance: {\n          Ok: '0'\n        },\n        payable: {\n          Ok: '0'\n        },\n        receivable: {\n          Ok: '0'\n        },\n        fees: {\n          Ok: '0'\n        },\n        resulting_balance: {\n          // 'This endpoint is a WIP'\n          Ok: '0'\n        }\n      }\n    }\n  ]\n}\n\nexport const pendingList = {\n  requests: [\n    {\n      event: [\n        'QmZR4u634UN9TtwaHvcS1vUkh6VdhmxUfkzTHjmKxZMryz',\n        '2019-09-10T00:18:20+00:00',\n        {\n          Request: {\n            from: 'HcScic3VAmEP9ucmrw4MMFKVARIvvdn43k6xi3d75PwnOswdaIE3BKFEUr3eozi',\n            to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n            amount: '124500.00',\n            fee: '2',\n            deadline: '2020-12-02T00:00:00+00:00',\n            notes: 'I want my $2!',\n            synchronous: null\n          }\n        }\n      ],\n      provenance: [\n        'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n        'JSnAoopQg0fVHsA3dQIvJ3tRl5CRdtBbCAjzUZLMaWsD51G8nieRhoKK8JIKqkjscsprJe+j+ceun9oPpoc3AA=='\n      ]\n    }\n  ],\n  promises: [\n    {\n      event: [\n        'QmYNt6DYMiymJtf8oeZ4qn86yWANurFEuAzKuzMQGhsnDd',\n        '2019-09-01T11:45:10+00:00',\n        {\n          Promise: {\n            tx: {\n              from: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n              to: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n              amount: '2000',\n              fee: '0',\n              deadline: '2020-01-22T00:00:00-02:00',\n              notes: 'lyft ride',\n              synchronous: null\n            },\n            request: null\n          }\n        }\n      ],\n      provenance: [\n        'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r',\n        '3+BrqUuu3sC4bZmub4qGvkmfeKnkJfkm5qZGOM88uompxM0/gE2KNpvTyxpGg44MCbNMB8i8vHBmhTIDMjFwAQ=='\n      ]\n    }\n  ]\n}\n\nconst agents = [\n  {\n    nick: 'Perry',\n    pub_sign_key: 'HcSCIgoBpzRmvnvq538iqbu39h9whsr6agZa6c9WPh9xujkb4dXBydEPaikvc5r'\n  },\n  {\n    nick: 'Sam',\n    pub_sign_key: 'HcScic3VAmEP9ucmrw4MMFKVARIvvdn43k6xi3d75PwnOswdaIE3BKFEUr3eozi'\n  }\n]\n\nconst whoamiObj = (agentId) => agents.find(agent => agent.pub_sign_key === agentId) || { error: 'No agent was found by this id.' }\n\nfunction listPending ({ origins }) {\n  if (!origins) return pendingList\n  if (isString(origins)) {\n    const filter = entry => entry.event[0] === origins\n    return {\n      requests: pendingList.requests.filter(filter),\n      promises: pendingList.promises.filter(filter)\n    }\n  }\n  throw new Error('Array value for origins param of list_pending is not supported in the mock dna')\n}\n\nconst NUM_SALT_ROUNDS = 10\nconst holofuel = {\n  transactions: {\n    whoami: ({ agentId }) => agentId ? whoamiObj(agentId) : agents[0],\n    ledger_state: () => transactionList.ledger,\n    list_transactions: () => transactionList,\n    list_pending: listPending,\n    request: ({ from, amount, deadline }) => bcrypt.hashSync((from + amount + deadline), NUM_SALT_ROUNDS),\n    promise: ({ to, amount, request, deadline }) => bcrypt.hashSync((to + amount + request + deadline), NUM_SALT_ROUNDS),\n    receive_payment: ({ promise, promise_sig: sig, promise_commit: commit }) => bcrypt.hashSync((promise + sig + commit + 'accepted'), NUM_SALT_ROUNDS),\n    receive_payments_pending: ({ promises }) => bcrypt.hashSync((promises + 'accepted'), NUM_SALT_ROUNDS),\n    decline: ({ origin }) => bcrypt.hashSync((origin + 'declined'), NUM_SALT_ROUNDS),\n    cancel: ({ origin }) => bcrypt.hashSync((origin + 'cancelled'), NUM_SALT_ROUNDS)\n  }\n}\n\nexport default holofuel\n"]},"metadata":{},"sourceType":"module"}